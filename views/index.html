<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>后台管理页面</title>
    <link rel="stylesheet" type="text/css" href="/static/css/reset.css">
    <link rel="stylesheet" type="text/css" href="/static/css/main.css">
    <script type="text/javascript" src="/static/js/jquery-1.12.4.min.js"></script>
    <script type="text/javascript" >
        window.onload=function(){
            $(".dels").click(function(){
                if(!confirm("是否删除？")){
                    return false
                }
            })
            $("#select").change(function(){
                $("#form").submit()
            })
            // #调用id，.调用class
        }
        // window.onload=function(){
        //     $(".dels").click(function(){
        //         if(!confirm("是否删除？")){
        //             return false
        //         }
        //     })
           

        //     $("#select").change(function(){
        //         var val=$(this).val();
        //         $.ajax( {  
        //         type : "GET",  
        //         url : "/ShowArticle",  
        //         data :   $("#form").val(),
                
        //     });  
        //     })
            //#调用id，.调用class
        // }
    </script>
</head>
<body>

    <div class="header">
        <a href="#" class="logo fl"><img src="/static/img/logo.png" alt="logo"></a>
        <a href="#" class="logout fr">退 出</a>
    </div>

    <div class="side_bar">
        <div class="user_info">
            <img src="/static/img/person.png" alt="张大山">
            <p>欢迎你 <em>李雷</em></p>
        </div>

        <div class="menu_con">
            <div class="first_menu active"><a href="javascript:;" class="icon02">文章管理</a></div>
            <ul class="sub_menu show">
                <li><a href="/ShowArticle" class="icon031">文章列表</a></li>
                <li><a href="/AddArticle" class="icon032">添加文章</a></li>
                <li><a href="/AddArticleType" class="icon034">添加分类</a></li>
            </ul>
        </div>
    </div>

    <div class="main_body" id="main_body">
        <div class="breadcrub">
            当前位置：文章管理>文章列表
        </div>
        <div class="pannel">
            <span class="sel_label">请选择文章分类：</span>
           <form id="form" method="GET" action="/ShowArticle">
                <select name="select" id="select" class="sel_opt">
                    <option >全部类型</option>
                    {{range .articletypes}}
                    <option selected="{{(.judge==.TypeName)?true:false}}">{{.TypeName}}</option>
                    {{end}}
                </select>
                <input type="submit" style="display:none">
            </form>
            <table class="common_table">
                <tr>
                    <th width="40%">文章标题</th>
                    <th width="10%">文章内容</th>
                    <th width="12%">添加时间</th>
                    <th width="12%">修改时间</th>
                    <th width="6%">阅读量</th>
                    <th width="6%">删除</th>
                    <th width="6%">编辑</th>
                    <th width="8%">文章类型</th>
                </tr>
                <!-- 
                {{range .articles}}
                <tr>
                    <td>{{.Title}}</td>
                    <td><a href="#">查看详情</a></td>
                    <td>{{.CreateTime}}</td>
                    <td>{{.Count}}</td>
                    <td><a href="#" class="dels">删除</a></td>
                    <td><a href="#">编辑</a></td>
                    <td>财经新闻</td>
                </tr>
                {{end}} -->
                {{range $index,$val:= .articles}}
                <tr>
                    <td>{{$val.Title}}</td>
                    <td><a href="/content?id={{$val.Id}}">查看详情</a></td>
                    <td>{{$val.CreateTime.Format "2006-01-02 15:04:05"}}</td>
                    <td>{{$val.UpdateTime.Format "2006-01-02 15:04:05"}}</td>
                    <td>{{$val.Count}}</td>
                    <td><a href="/DeleteArticle?id={{$val.Id}}" class="dels">删除</a></td>
                    <td><a href="/UpdateArticle?id={{$val.Id}}">编辑</a></td>
                    <td>{{$val.ArticleType.TypeName}}</td>
                    <!-- 跨表拿数据，需确保查询器增加了relatedsel函数 -->
                </tr>
                {{end}}
            </table>

            <ul class="pagenation">
                <li><a href="/ShowArticle?pageIndex=1">首页</a></li>
                {{if compare .EnableLast true}}
                <li><a href="/ShowArticle?pageIndex={{.pageIndex | ShowLastPage}}&select={{.typename}}">上一页 </a> </li>
                {{else}}
                <li>上一页</li>
                {{end}}
                {{if compare .EnableNext true}}
                <li> <a href="/ShowArticle?pageIndex={{.pageIndex | ShowNextPage}}&select={{.typename}}">下一页</a></li>
                {{else}}
                <li>下一页</li>
                {{end}}
                <li><a href="/ShowArticle?pageIndex={{.pageCount}}">末页</a></li>
                <li>共{{.count}}条记录/共{{.pageCount}}页/当前第{{.pageIndex}}页</li>
            </ul>
        </div>
    </div>
</body>
</html>
